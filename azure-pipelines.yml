trigger:
- none

pool: 
  name: Default
  demands:
    - agent.name -equals TC01 

jobs:
- job: SSH_Connection
  displayName: 'Establish SSH Connection between Two Remote VMs'
  steps:
    
  - script: |
      
      REMOTE_USER_1="infodba"
      REMOTE_HOST_1="DENBG0811VM"
      REMOTE_USER_2="infodba"
      REMOTE_HOST_2="DENBG0817VM"

      
      ssh -o StrictHostKeyChecking=no $REMOTE_USER_1@$REMOTE_HOST_1 << EOF
        echo "Connected to $REMOTE_HOST_1"
        
        ssh -o StrictHostKeyChecking=no $REMOTE_USER_2@$REMOTE_HOST_2 "echo 'Connected to $REMOTE_HOST_2 from $REMOTE_HOST_1'"
      EOF
    displayName: 'SSH Connection Between Remote VMs'